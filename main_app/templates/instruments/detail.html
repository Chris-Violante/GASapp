{% extends 'base.html' %}
{% block content %}

<h1>{{ instrument.name }}</h1>
<div class="row card-container">
    <div class="col s12 m8 l6">
        <div class="card">
            <div class="card-image">
                <img src="{{ instrument.instrumentphoto_set.first.url }}">
                <span class="card-title">{{ instrument.name }}</span>
            </div>
            <div class="card-content">
                <p>Manufacturer: {{ instrument.manufacturer }}</p>
                <p>Manufacture Year: {{ instrument.year }}</p>
                <p>Serial No: {{ instrument.serial }}</p>
                <p>Type: {{ instrument.instrument_type }}</p>
                <p>Price: {{ instrument.price }}</p>
                <p>Condition: {{ instrument.get_condition_display }}</p>
                <p>
                    Owned: 
                    {% if instrument.owned %}
                        <span style="color:green">True</span>
                    {% else %}
                        <span style="color:red">False</span>
                    {% endif %}
                </p>
            </div>
            <div class="card-action blue-grey accent-1">
                <a href="{% url 'instruments_update' instrument.id %}">Edit</a>
                <a href="{% url 'instruments_delete' instrument.id %}">Delete</a>
            </div>
        </div>
    </div>
</div>

<hr class="blue-grey">
<h3>Associated Accessories:</h3>
<div class="row card-container">
{% for accessory in instrument.accessories.all %}
<div class="col s12 m6">
        <div class="card horizontal">
            <div class="card-image">
                <img src="{{ accessory.accessoryphoto_set.first.url  }}">
            </div>
            <div class='card-stacked'>
                <div class="card-content">                
                    <p> {{ accessory.name }}</p>
                    <form action="{% url 'dis_assoc_accessory' instrument.id accessory.id %}">
                        <button type="submit" class="btn btn-small">Remove</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
       
</div>
<hr class="blue-grey">

<h3>Available Accessories:</h3>
<div class="row card-container">
{% for accessory in accessories %}
<div class="col s12 m6">
        <div class="card">
            <div class="card-content">                
                <p> {{ accessory.name }}</p>
                <form action="{% url 'assoc_accessory' instrument.id accessory.id %}">
                    <button type="submit" class="btn btn-small">Add</button>
                </form>
            </div>
        </div>
    </div>
{% endfor%}
 <div class="col s12 m6">
        <div class="card">
            <div class="card-content">                
                <p>Don't see the one you want?</p>
                <a href="{% url 'accessories_create' %}">Click here to add a new one</a>
            </div>
        </div>
    </div>
</div>

   

<hr class="blue-grey">

<h3>Photos for this instrument:</h3>
<div class="row card-container">
    <div class="col s12 m6">
        <div class="card">
            <div class="card-content">
                {% for photo in instrument.instrumentphoto_set.all %}
                <img class="responsive-img card-panel" src="{{ photo.url }}">
                <form action="{% url 'delete_photo' photo.id instrument.id 0 %}">
                    <button type="submit" class="btn btn-small">Delete</button>
                </form>
                {% empty %}
                <div class="card-panel blue-grey-text center-align">No Photos Uploaded</div>
                {% endfor %}
                <form action="{% url 'add_photo' instrument.id 0 %}" enctype="multipart/form-data" method="POST"
                    class="card-panel">
                    {% csrf_token %}
                    <input type="file" name="photo-file">
                    <br><br>
                    <button type="submit" class="btn">Submit Photo</button>
                </form>
            </div>
        </div>
    </div>
</div>

{% endblock %}